{
  "info": {
    "name": "Ticketing System Arwana - Complete API Collection",
    "description": "Complete API collection untuk Ticketing System PT Arwana.\n\nIncludes:\n- Authentication (Register, Login, Logout, Me, Get Own Profile)\n- Ticket Management (Create, List, View, Assign, Confirm, Reject, Solve, Unresolve, Close)\n- My Tickets & History (Get Own Tickets, View Completion History, View Technician Resolved Tickets)\n- User Management - Master Admin (List, View, Create, Update, Reset Password)\n- User Access Control (Get by Role, Roles Summary)\n- Department Management (List, Create, Update, Delete)\n- Category Management (List, Create, Update, Delete)\n\nSetup:\n1. Login untuk dapatkan token\n2. Set token di collection variable 'auth_token'\n3. Token akan otomatis digunakan di semua request yang membutuhkan auth",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "_exporter_id": "ticketing-arwana"
  },
  "auth": {
    "type": "bearer",
    "bearer": [
      {
        "key": "token",
        "value": "{{auth_token}}",
        "type": "string"
      }
    ]
  },
  "item": [
    {
      "name": "1. Authentication",
      "item": [
        {
          "name": "Register",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    var jsonData = pm.response.json();",
                  "    pm.collectionVariables.set('auth_token', jsonData.token);",
                  "    pm.collectionVariables.set('user_id', jsonData.user.id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Test User\",\n  \"email\": \"testuser@arwana.com\",\n  \"phone\": \"081234567899\",\n  \"password\": \"password123\",\n  \"password_confirmation\": \"password123\",\n  \"department_id\": 1\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/register",
              "host": ["{{base_url}}"],
              "path": ["api", "register"]
            },
            "description": "Register user baru. Default role: requester.\n\nRequired:\n- name: Nama lengkap\n- email: Email unique\n- phone: Nomor telepon unique\n- password: Min 8 karakter\n- password_confirmation: Harus sama dengan password\n\nOptional:\n- department_id: ID department yang ada"
          },
          "response": []
        },
        {
          "name": "Login",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    var jsonData = pm.response.json();",
                  "    pm.collectionVariables.set('auth_token', jsonData.token);",
                  "    pm.collectionVariables.set('user_id', jsonData.user.id);",
                  "    console.log('Token saved:', jsonData.token);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"login\": \"admin@arwana.com\",\n  \"password\": \"password123\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/login",
              "host": ["{{base_url}}"],
              "path": ["api", "login"]
            },
            "description": "Login dengan email atau phone.\n\nField login bisa diisi dengan:\n- Email: user@example.com\n- Phone: 081234567890\n\nToken akan otomatis tersimpan di collection variable."
          },
          "response": []
        },
        {
          "name": "Login Master Admin",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    var jsonData = pm.response.json();",
                  "    pm.collectionVariables.set('auth_token', jsonData.token);",
                  "    pm.collectionVariables.set('user_id', jsonData.user.id);",
                  "    console.log('Master Admin Token saved:', jsonData.token);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"login\": \"{{master_admin_email}}\",\n  \"password\": \"{{master_admin_password}}\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/login",
              "host": ["{{base_url}}"],
              "path": ["api", "login"]
            },
            "description": "Login sebagai Master Admin untuk akses User Management.\n\nGunakan credential dari .env:\n- MASTER_ADMIN_EMAIL\n- MASTER_ADMIN_PASSWORD"
          },
          "response": []
        },
        {
          "name": "Get Current User (Me)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/me",
              "host": ["{{base_url}}"],
              "path": ["api", "me"]
            },
            "description": "Mendapatkan informasi user yang sedang login.\n\nResponse:\n- User data\n- Roles\n- Permissions"
          },
          "response": []
        },
        {
          "name": "Get User Info",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/user",
              "host": ["{{base_url}}"],
              "path": ["api", "user"]
            },
            "description": "Alternative endpoint untuk mendapatkan user info (Laravel default)."
          },
          "response": []
        },
        {
          "name": "Logout",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    pm.collectionVariables.set('auth_token', '');",
                  "    console.log('Token cleared');",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/logout",
              "host": ["{{base_url}}"],
              "path": ["api", "logout"]
            },
            "description": "Logout dan revoke current access token.\n\nToken akan dihapus dari collection variable."
          },
          "response": []
        }
      ],
      "description": "Endpoint untuk authentication:\n- Register user baru\n- Login (email atau phone)\n- Get current user info\n- Logout"
    },
    {
      "name": "2. Ticket Management",
      "item": [
        {
          "name": "Create Ticket",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"subject\": \"Komputer tidak bisa menyala\",\n  \"description\": \"Komputer di ruang admin lantai 2 tidak bisa menyala sejak pagi ini. Lampu indikator power tidak menyala sama sekali.\",\n  \"category_id\": 1,\n  \"channel\": \"web\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/tickets",
              "host": ["{{base_url}}"],
              "path": ["api", "tickets"]
            },
            "description": "Create ticket baru.\n\nPermission: ticket.create (requester role)\n\nRequired:\n- subject: Judul ticket (max 255 char)\n- description: Deskripsi lengkap masalah\n- category_id: ID kategori ticket\n- channel: Saluran pelaporan (web, mobile, email)\n\nOptional:\n- attachments: File attachment (jika ada)"
          },
          "response": []
        },
        {
          "name": "List Tickets",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/tickets?page=1&per_page=15&status=open&priority=high",
              "host": ["{{base_url}}"],
              "path": ["api", "tickets"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "per_page",
                  "value": "15"
                },
                {
                  "key": "status",
                  "value": "open",
                  "description": "Filter by status"
                },
                {
                  "key": "priority",
                  "value": "high",
                  "description": "Filter by priority"
                },
                {
                  "key": "category_id",
                  "value": "1",
                  "disabled": true,
                  "description": "Filter by category"
                },
                {
                  "key": "assigned_to",
                  "value": "5",
                  "disabled": true,
                  "description": "Filter by assigned technician"
                },
                {
                  "key": "search",
                  "value": "komputer",
                  "disabled": true,
                  "description": "Search in title/description"
                }
              ]
            },
            "description": "List semua tickets dengan pagination dan filter.\n\nPermission: ticket.view\n\nFilters:\n- status: open, in_progress, resolved, closed\n- priority: low, medium, high, critical\n- category_id: Filter by category\n- assigned_to: Filter by technician ID\n- search: Search keyword\n\nNote: User hanya bisa lihat ticket sesuai role:\n- Requester: Hanya ticket sendiri\n- Technician: Ticket yang di-assign\n- Supervisor/Admin: Semua ticket"
          },
          "response": []
        },
        {
          "name": "Get Ticket Detail",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/tickets/{{ticket_id}}",
              "host": ["{{base_url}}"],
              "path": ["api", "tickets", "{{ticket_id}}"]
            },
            "description": "Mendapatkan detail ticket termasuk:\n- Data ticket lengkap\n- Comments\n- History/Logs\n- Assigned technician\n- Solution (jika sudah resolved)\n\nPermission: ticket.view"
          },
          "response": []
        },
        {
          "name": "Assign Ticket to Technician",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"assigned_to\": 5,\n  \"notes\": \"Assigned ke technician untuk penanganan segera\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/tickets/{{ticket_id}}/assign",
              "host": ["{{base_url}}"],
              "path": ["api", "tickets", "{{ticket_id}}", "assign"]
            },
            "description": "Assign ticket ke technician oleh helpdesk.\n\nPermission: ticket.assign (helpdesk/supervisor/admin)\n\nWorkflow:\n- Ticket status: Open → Assigned\n- Technician yang di-assign harus confirm atau reject ticket\n\nRequired:\n- assigned_to: User ID technician\n\nOptional:\n- notes: Catatan assignment\n\nResponse:\n- Returns assigned technician info\n- Includes notes and assigned_at timestamp"
          },
          "response": []
        },
        {
          "name": "Technician Confirm Ticket",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{}"
            },
            "url": {
              "raw": "{{base_url}}/api/tickets/{{ticket_id}}/confirm",
              "host": ["{{base_url}}"],
              "path": ["api", "tickets", "{{ticket_id}}", "confirm"]
            },
            "description": "Technician confirm ticket yang sudah di-assign.\n\nPermission: ticket.change_status (technician)\n\nWorkflow:\n- Ticket status: Assigned → In Progress\n- Hanya technician yang di-assign yang bisa confirm\n\nNo body required."
          },
          "response": []
        },
        {
          "name": "Technician Reject Ticket",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"rejection_reason\": \"Saya tidak memiliki tools yang diperlukan untuk menangani issue hardware ini\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/tickets/{{ticket_id}}/reject",
              "host": ["{{base_url}}"],
              "path": ["api", "tickets", "{{ticket_id}}", "reject"]
            },
            "description": "Technician reject ticket yang sudah di-assign.\n\nPermission: ticket.change_status (technician)\n\nWorkflow:\n- Ticket status: Assigned → Open\n- Assignment dihapus\n- Ticket kembali bisa di-assign ke technician lain\n\nRequired:\n- rejection_reason: Alasan reject (min 10 char)"
          },
          "response": []
        },
        {
          "name": "Solve/Resolve Ticket",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"solution\": \"Sudah dicek kabel power ternyata tidak terpasang dengan baik. Sudah dipasang kembali dengan benar dan komputer sudah bisa menyala normal.\",\n  \"resolved_at\": \"2026-01-28 14:30:00\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/tickets/{{ticket_id}}/solve",
              "host": ["{{base_url}}"],
              "path": ["api", "tickets", "{{ticket_id}}", "solve"]
            },
            "description": "Resolve/solve ticket dengan memberikan solution.\n\nPermission: ticket.resolve (technician)\n\nWorkflow:\n- Ticket status: In Progress → Resolved\n- Hanya technician yang di-assign yang bisa resolve\n\nNotes:\n- Ticket harus sudah di-confirm (status In Progress)\n- Creates ticket solution record dengan solved_at timestamp\n\nRequired:\n- solution: Deskripsi solusi yang diberikan (min 10 char)"
          },
          "response": []
        },
        {
          "name": "Helpdesk Unresolve Ticket",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"unresolve_reason\": \"Masalah masih terjadi setelah dicek ulang. Komputer masih tidak bisa menyala. Mohon dicek kembali\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/tickets/{{ticket_id}}/unresolve",
              "host": ["{{base_url}}"],
              "path": ["api", "tickets", "{{ticket_id}}", "unresolve"]
            },
            "description": "Helpdesk unresolve ticket jika masalah belum terselesaikan.\n\nPermission: ticket.assign (helpdesk/supervisor/admin)\n\nWorkflow:\n- Ticket status: Resolved → In Progress\n- Ticket kembali ke technician yang sama untuk dicek ulang\n\nRequired:\n- unresolve_reason: Alasan unresolve (min 10 char)"
          },
          "response": []
        },
        {
          "name": "Close Ticket",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"closing_notes\": \"Ticket sudah diselesaikan dengan baik. User sudah konfirmasi komputer berjalan normal.\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/tickets/{{ticket_id}}/close",
              "host": ["{{base_url}}"],
              "path": ["api", "tickets", "{{ticket_id}}", "close"]
            },
            "description": "Close ticket setelah resolved dan masalah benar-benar selesai.\n\nPermission: ticket.close (helpdesk/admin/supervisor)\n\nWorkflow:\n- Ticket status: Resolved → Closed\n- Ticket tidak bisa diubah lagi setelah closed\n\nOptional:\n- closing_notes: Catatan penutupan ticket"
          },
          "response": []
        }
      ],
      "description": "Endpoint untuk ticket management:\n\nWorkflow:\n1. Requester: Create ticket (status: Open)\n2. Helpdesk: Assign ticket ke technician (status: Assigned)\n3. Technician: Confirm atau Reject ticket\n   - Confirm: status → In Progress\n   - Reject: status → Open (assignment dihapus)\n4. Technician: Resolve ticket (status: Resolved)\n5. Helpdesk: Close atau Unresolve ticket\n   - Close: status → Closed (final)\n   - Unresolve: status → In Progress (untuk dicek ulang)\n\nEndpoints:\n- Create ticket\n- List tickets dengan filter\n- View ticket detail\n- Assign ke technician\n- Confirm ticket (technician)\n- Reject ticket (technician)\n- Resolve ticket (technician)\n- Unresolve ticket (helpdesk)\n- Close ticket (helpdesk)"
    },
    {
      "name": "2a. My Tickets & History",
      "item": [
        {
          "name": "Get My Tickets",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/my-tickets",
              "host": ["{{base_url}}"],
              "path": ["api", "my-tickets"]
            },
            "description": "Mendapatkan semua ticket yang dibuat oleh user (requester).\n\nPermission: Terbuka untuk semua authenticated users\n\nResponse:\n- message: Status message\n- data: Array of tickets yang dibuat oleh user\n  - Includes: requester, status, category, assignment dengan technician info\n\nGunakan endpoint ini untuk requester melihat status semua ticketnya."
          },
          "response": []
        },
        {
          "name": "Get Ticket Completion History",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/tickets/{{ticket_id}}/completion-history",
              "host": ["{{base_url}}"],
              "path": ["api", "tickets", "{{ticket_id}}", "completion-history"]
            },
            "description": "Melihat history penyelesaian ticket - siapa teknisi yang menyelesaikannya dan kapan.\n\nPermission: ticket.view\n\nPath Parameters:\n- ticket_id: ID ticket\n\nResponse:\n- message: Status message\n- data:\n  - ticket_id: ID ticket\n  - ticket_number: Nomor ticket (TKT-YYYY-XXXXXX)\n  - completion_histories: Array of completion records\n    - id: History ID\n    - technician_id: ID teknisi\n    - resolved_at: Waktu penyelesaian\n    - solution_text: Solusi yang diberikan\n    - technician: Object berisi data teknisi (name, email)\n\nGunakan endpoint ini untuk melihat siapa saja yang pernah menyelesaikan ticket ini (jika ada multiple resolutions/unresolves)."
          },
          "response": []
        },
        {
          "name": "Get Technician Resolved Tickets",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/users/{{user_id}}/resolved-tickets",
              "host": ["{{base_url}}"],
              "path": ["api", "users", "{{user_id}}", "resolved-tickets"]
            },
            "description": "Melihat semua ticket yang telah diselesaikan oleh seorang technician.\n\nPermission: user.view (helpdesk, supervisor, admin)\n\nPath Parameters:\n- user_id: ID technician user\n\nResponse:\n- message: Status message\n- data:\n  - technician_id: ID teknisi\n  - technician_name: Nama teknisi\n  - total_resolved: Total ticket yang diselesaikan\n  - resolved_tickets: Array of completion history records\n    - id: History ID\n    - ticket_id: ID ticket\n    - resolved_at: Waktu penyelesaian\n    - solution_text: Solusi yang diberikan\n    - ticket: Object berisi ticket info (ticket_number, subject, status)\n\nGunakan endpoint ini untuk melihat performa technician - berapa banyak ticket yang sudah diselesaikan."
          },
          "response": []
        }
      ],
      "description": "Endpoint untuk melihat ticket history dan penyelesaian:\n\n- Get My Tickets: Requester melihat semua ticket mereka\n- Get Ticket Completion History: Melihat history siapa saja yang menyelesaikan ticket tertentu\n- Get Technician Resolved Tickets: Melihat semua ticket yang diselesaikan oleh seorang technician\n\nFitur baru: Automatic tracking ketika technician menyelesaikan ticket via /solve endpoint, sistem mencatat di TechnicianTicketHistory untuk audit trail dan performance tracking."
    },
    {
      "name": "3. User Management (Master Admin)",
      "item": [
        {
          "name": "Get Available Roles",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/users/available-roles",
              "host": ["{{base_url}}"],
              "path": ["api", "users", "available-roles"]
            },
            "description": "Mendapatkan list role yang tersedia untuk assignment.\n\nRole: master-admin only\n\nResponse: [\"helpdesk\", \"technician\", \"supervisor\"]"
          },
          "response": []
        },
        {
          "name": "Get Users by Role",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/users/by-role/technician",
              "host": ["{{base_url}}"],
              "path": ["api", "users", "by-role", "technician"]
            },
            "description": "Mendapatkan semua user dengan role tertentu.\n\nRole: master-admin only\n\nPath Parameters:\n- roleName: helpdesk, technician, supervisor, requester, manager\n\nResponse:\n- message: Status message\n- role: Role yang di-filter\n- count: Jumlah user dengan role tersebut\n- data: Array of users dengan role tersebut"
          },
          "response": []
        },
        {
          "name": "Get Roles Summary",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/users/roles-summary",
              "host": ["{{base_url}}"],
              "path": ["api", "users", "roles-summary"]
            },
            "description": "Mendapatkan ringkasan jumlah user per role di sistem.\n\nRole: master-admin only\n\nResponse:\n- message: Status message\n- data: Array of roles dengan user count masing-masing"
          },
          "response": []
        },
        {
          "name": "List All Users",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/users?page=1&per_page=15",
              "host": ["{{base_url}}"],
              "path": ["api", "users"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "per_page",
                  "value": "15"
                },
                {
                  "key": "role",
                  "value": "helpdesk",
                  "disabled": true,
                  "description": "Filter by role"
                },
                {
                  "key": "department_id",
                  "value": "1",
                  "disabled": true,
                  "description": "Filter by department"
                },
                {
                  "key": "search",
                  "value": "john",
                  "disabled": true,
                  "description": "Search name/email/phone"
                }
              ]
            },
            "description": "List semua users dengan pagination dan filter.\n\nRole: master-admin only\n\nQuery Parameters:\n- page: Page number\n- per_page: Items per page (default: 15)\n- role: Filter by role (helpdesk, technician, supervisor)\n- department_id: Filter by department\n- search: Search by name, email, or phone"
          },
          "response": []
        },
        {
          "name": "Get User Detail",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/users/{{user_id}}",
              "host": ["{{base_url}}"],
              "path": ["api", "users", "{{user_id}}"]
            },
            "description": "Mendapatkan detail user.\n\nRole: master-admin only"
          },
          "response": []
        },
        {
          "name": "Create User",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"John Helpdesk\",\n  \"email\": \"john.helpdesk@arwana.com\",\n  \"phone\": \"081234567891\",\n  \"password\": \"password123\",\n  \"department_id\": 1,\n  \"roles\": [\"helpdesk\"]\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/users",
              "host": ["{{base_url}}"],
              "path": ["api", "users"]
            },
            "description": "Create user baru dengan role assignment.\n\nRole: master-admin only\n\nRequired:\n- name: Nama lengkap (max 100 char)\n- email: Email unique\n- phone: Phone unique (max 20 char)\n- password: Min 8 characters\n- roles: Array of roles [\"helpdesk\", \"technician\", \"supervisor\"]\n\nOptional:\n- department_id: ID department"
          },
          "response": []
        },
        {
          "name": "Create User - Multiple Roles",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Jane Multi Role\",\n  \"email\": \"jane.multi@arwana.com\",\n  \"phone\": \"082345678902\",\n  \"password\": \"password123\",\n  \"department_id\": 1,\n  \"roles\": [\"helpdesk\", \"technician\"]\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/users",
              "host": ["{{base_url}}"],
              "path": ["api", "users"]
            },
            "description": "Create user dengan multiple roles.\n\nUser bisa memiliki lebih dari 1 role sekaligus."
          },
          "response": []
        },
        {
          "name": "Update User",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"John Helpdesk Updated\",\n  \"email\": \"john.updated@arwana.com\",\n  \"phone\": \"081234567892\",\n  \"department_id\": 2,\n  \"roles\": [\"technician\"]\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/users/{{user_id}}",
              "host": ["{{base_url}}"],
              "path": ["api", "users", "{{user_id}}"]
            },
            "description": "Update user data.\n\nRole: master-admin only\n\nSemua field optional (hanya kirim field yang ingin diupdate):\n- name\n- email (unique, except self)\n- phone (unique, except self)\n- department_id\n- roles (array)\n\nNote: Tidak bisa update master-admin user"
          },
          "response": []
        },
        {
          "name": "Update User - Partial",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"John Updated Name Only\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/users/{{user_id}}",
              "host": ["{{base_url}}"],
              "path": ["api", "users", "{{user_id}}"]
            },
            "description": "Partial update - hanya update field tertentu.\n\nKirim hanya field yang ingin diubah."
          },
          "response": []
        },
        {
          "name": "Reset User Password",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"password\": \"newpassword123\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/users/{{user_id}}/reset-password",
              "host": ["{{base_url}}"],
              "path": ["api", "users", "{{user_id}}", "reset-password"]
            },
            "description": "Reset password user.\n\nRole: master-admin only\n\nRequired:\n- password: Password baru (min 8 char)\n\nNote:\n- Tidak bisa reset master-admin password\n- Semua active session user akan di-logout\n- User harus login kembali dengan password baru"
          },
          "response": []
        }

      ],
      "description": "Endpoint untuk user management (Master Admin only):\n- List users\n- Get users by specific role\n- Get roles summary\n- Create user dengan role\n- Update user data & roles\n- Reset password\n\nProtection:\n- Master-admin user tidak bisa di-edit/reset"
    },
    {
      "name": "4. Department Management",
      "item": [
        {
          "name": "List All Departments",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/departments",
              "host": ["{{base_url}}"],
              "path": ["api", "departments"],
              "query": [
                {
                  "key": "search",
                  "value": "IT",
                  "disabled": true
                }
              ]
            },
            "description": "Menampilkan semua departemen dengan opsional pencarian.\n\nRole: All authenticated users\n\nQuery Parameters:\n- search (optional): Filter departemen berdasarkan nama"
          },
          "response": []
        },
        {
          "name": "Get Department Detail",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/departments/1",
              "host": ["{{base_url}}"],
              "path": ["api", "departments", "1"]
            },
            "description": "Menampilkan detail departemen berdasarkan ID.\n\nRole: All authenticated users"
          },
          "response": []
        },
        {
          "name": "Create Department",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Information Technology\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/departments",
              "host": ["{{base_url}}"],
              "path": ["api", "departments"]
            },
            "description": "Membuat departemen baru.\n\nRole: Admin & Helpdesk only\n\nRequired:\n- name: Nama departemen (max 255 char, harus unique)"
          },
          "response": []
        },
        {
          "name": "Update Department",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"IT Department\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/departments/1",
              "host": ["{{base_url}}"],
              "path": ["api", "departments", "1"]
            },
            "description": "Mengupdate data departemen.\n\nRole: Admin & Helpdesk only\n\nRequired:\n- name: Nama departemen baru (harus unique jika berubah)"
          },
          "response": []
        },
        {
          "name": "Delete Department",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/departments/1",
              "host": ["{{base_url}}"],
              "path": ["api", "departments", "1"]
            },
            "description": "Menghapus departemen.\n\nRole: Admin & Helpdesk only\n\nCatatan:\n- Tidak bisa menghapus departemen yang masih memiliki user\n- Akan mengembalikan 422 error jika ada user terikat"
          },
          "response": []
        }
      ],
      "description": "Endpoint untuk department management:\n- List departments dengan pencarian (All roles)\n- Get department detail (All roles)\n- Create, Update, Delete departments (Admin & Helpdesk only)\n\nProtection:\n- GET: Semua user yang authenticated\n- POST/PUT/PATCH/DELETE: Hanya Admin & Helpdesk\n- Validasi: Nama departemen harus unique\n- Soft delete protection: Tidak bisa hapus departemen dengan user"
    },
    {
      "name": "5. Category Management",
      "item": [
        {
          "name": "List All Categories",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/categories",
              "host": ["{{base_url}}"],
              "path": ["api", "categories"],
              "query": [
                {
                  "key": "search",
                  "value": "Hardware",
                  "disabled": true
                }
              ]
            },
            "description": "Mengambil semua kategori tiket dengan opsional pencarian.\n\nRole: Public (tidak perlu auth)\n\nQuery Parameters:\n- search (optional): Filter kategori berdasarkan nama atau deskripsi"
          },
          "response": []
        },
        {
          "name": "Get Category Detail",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/categories/1",
              "host": ["{{base_url}}"],
              "path": ["api", "categories", "1"]
            },
            "description": "Mengambil detail kategori berdasarkan ID.\n\nRole: Public (tidak perlu auth)\n\nResponse:\n- Menampilkan detail kategori lengkap\n- 404 jika kategori tidak ditemukan"
          },
          "response": []
        },
        {
          "name": "Create Category",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Database\",\n  \"description\": \"Masalah database dan server\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/categories",
              "host": ["{{base_url}}"],
              "path": ["api", "categories"]
            },
            "description": "Membuat kategori tiket baru.\n\nRole: Admin & Helpdesk only\n\nRequired:\n- name: Nama kategori (max 255 karakter, harus unique)\n\nOptional:\n- description: Deskripsi kategori (max 1000 karakter)\n\nValidation Errors:\n- 422: Nama sudah ada, atau format tidak valid\n- 401: Tidak authenticated\n- 403: Role tidak memiliki akses"
          },
          "response": []
        },
        {
          "name": "Update Category",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Perangkat Keras\",\n  \"description\": \"Masalah hardware dan perangkat keras komputer\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/categories/1",
              "host": ["{{base_url}}"],
              "path": ["api", "categories", "1"]
            },
            "description": "Mengubah/update kategori tiket.\n\nRole: Admin & Helpdesk only\n\nRequired:\n- name: Nama kategori baru (max 255 karakter, harus unique kecuali nama sama)\n\nOptional:\n- description: Deskripsi kategori baru (max 1000 karakter)\n\nNote:\n- Bisa menggunakan PATCH juga dengan request yang sama\n- 404 jika kategori tidak ditemukan"
          },
          "response": []
        },
        {
          "name": "Delete Category",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/categories/1",
              "host": ["{{base_url}}"],
              "path": ["api", "categories", "1"]
            },
            "description": "Menghapus kategori tiket.\n\nRole: Admin & Helpdesk only\n\nCatatan:\n- Tidak bisa menghapus kategori yang masih memiliki tiket\n- Akan mengembalikan 422 error jika ada tiket terikat\n- 404 jika kategori tidak ditemukan"
          },
          "response": []
        }
      ],
      "description": "Endpoint untuk category management (Manajemen Kategori Tiket):\n- List categories dengan pencarian (Public)\n- Get category detail (Public)\n- Create, Update, Delete categories (Admin & Helpdesk only)\n\nProtection:\n- GET: Public - tidak perlu auth\n- POST/PUT/PATCH/DELETE: Hanya Admin & Helpdesk\n- Validasi: Nama kategori harus unique\n- Soft delete protection: Tidak bisa hapus kategori dengan tiket\n\nUse Cases:\n- Master Admin & Helpdesk: Kelola daftar kategori tiket untuk sistem"
    }
  ],
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "type": "text/javascript",
        "exec": [
          ""
        ]
      }
    },
    {
      "listen": "test",
      "script": {
        "type": "text/javascript",
        "exec": [
          ""
        ]
      }
    }
  ],
  "variable": [
    {
      "key": "base_url",
      "value": "http://localhost:8000",
      "type": "string"
    },
    {
      "key": "auth_token",
      "value": "",
      "type": "string"
    },
    {
      "key": "user_id",
      "value": "",
      "type": "string"
    },
    {
      "key": "ticket_id",
      "value": "1",
      "type": "string"
    },
    {
      "key": "master_admin_email",
      "value": "admin@arwana.com",
      "type": "string"
    },
    {
      "key": "master_admin_password",
      "value": "password123",
      "type": "string"
    }
  ]
}
